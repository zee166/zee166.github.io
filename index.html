<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>คัดลอกข้อความ VMESS</title>
  <style>
    :root{
      --bg:#f5f8f7;
      --card:#ffffff;
      --accent:#157a5f;
      --muted:#556b63;
    }
    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Arial;
      background:var(--bg);
      margin:0;
      padding:24px;
      color:#123326;
      -webkit-font-smoothing:antialiased;
    }
    .container{
      max-width:900px;
      margin:24px auto;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow:0 6px 18px rgba(10,30,20,0.06);
    }
    h1{margin:0 0 8px;font-size:1.15rem}
    p.lead{margin:0 0 12px;color:var(--muted)}
    textarea#content{
      width:100%;
      min-height:160px;
      padding:12px;
      border-radius:8px;
      border:1px solid #e6ece8;
      resize:vertical;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Courier New", monospace;
      background:#fbfff9;
      white-space:pre-wrap;
      overflow:auto;
    }
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{
      background:var(--accent);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
    }
    button.secondary{
      background:#e9f6f1;
      color:var(--accent);
      border:1px solid #cfe7da;
    }
    button:disabled{opacity:0.6;cursor:not-allowed}
    .hint{margin-top:10px;color:var(--muted);font-size:0.92rem}
    .msg{margin-top:10px;padding:8px;border-radius:8px;background:#fffef6;border:1px solid #f1e8cf;color:#6b5a2a;display:none}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">เครื่องมือคัดลอกข้อความ</h1>
      <p class="lead">ข้อความที่เตรียมไว้ (กด "คัดลอก" เพื่อคัดลอกไปยังคลิปบอร์ด หรือดาวน์โหลดเป็นไฟล์ .txt)</p>

      <textarea id="content" aria-label="ข้อความ vmess" spellcheck="false">vmess://eyJpZCI6IjIwMjlhZWZhLWI2NWEtMTFmMC04NTY1LWU3ZGIzMGZlZDVlZiIsInNlcnZpY2VOYW1lIjoibm9uZSIsInNlZWQiOiIiLCJkZXZpY2VJRCI6IiIsInBvcnQiOiI4MCIsInBhdGgiOiJcL3ZwbmphbnRpdCIsIm5ldCI6IndzIiwiaG9zdCI6IlRpa3Zwbi5TcGVlZHRlc3QubmV0IiwiZnJhZ21lbnQiOiIiLCJzbmkiOiIiLCJleHRyYSI6IiIsImZwIjoiIiwibW9kZSI6IiIsImFkZCI6InNnOC52cG5qYW50aXQuY29tIiwiYWxwbiI6IiIsInYiOiIyIiwicHMiOiJKZ2ZmZy12cG5qYW50aXQuY29tIiwidGxzIjoibm9uZSIsImhlYWRlclR5cGUiOiIiLCJhaWQiOiIwIiwidHlwZSI6Im5vbmUifQ==</textarea>

      <div class="controls" role="group" aria-label="controls">
        <button id="btnCopy">คัดลอกไปยังคลิปบอร์ด</button>
        <button id="btnSelect" class="secondary">เลือกทั้งหมด</button>
        <button id="btnDownload" class="secondary">ดาวน์โหลดเป็น .txt</button>
      </div>

      <div id="msg" class="msg" role="status" aria-live="polite"></div>
      <p class="hint">หมายเหตุ: ตรวจสอบการใช้งานข้อความนี้ให้แน่ใจว่าไม่ขัดต่อข้อกำหนดหรือกฎหมายท้องถิ่น</p>
    </div>
  </div>

  <script>
    (function(){
      const ta = document.getElementById('content');
      const btnCopy = document.getElementById('btnCopy');
      const btnSelect = document.getElementById('btnSelect');
      const btnDownload = document.getElementById('btnDownload');
      const msg = document.getElementById('msg');

      function show(msgText, ms = 3000){
        msg.textContent = msgText;
        msg.style.display = 'block';
        clearTimeout(show._t);
        show._t = setTimeout(()=> msg.style.display = 'none', ms);
      }

      async function copyToClipboard(text){
        if (!text) throw new Error('ไม่มีข้อความให้คัดลอก');
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
          return;
        }
        // fallback for older browsers
        const tmp = document.createElement('textarea');
        tmp.value = text;
        tmp.style.position = 'fixed';
        tmp.style.left = '-9999px';
        document.body.appendChild(tmp);
        tmp.select();
        const ok = document.execCommand('copy');
        document.body.removeChild(tmp);
        if (!ok) throw new Error('คัดลอกไม่สำเร็จ (fallback)');
      }

      btnCopy.addEventListener('click', async () => {
        try {
          await copyToClipboard(ta.value);
          show('คัดลอกสำเร็จ ✅');
        } catch (e) {
          alert('คัดลอกไม่สำเร็จ: ' + (e.message || e));
        }
      });

      btnSelect.addEventListener('click', () => {
        ta.focus();
        ta.select();
        show('เลือกข้อความทั้งหมดแล้ว');
      });

      btnDownload.addEventListener('click', () => {
        const text = ta.value || '';
        const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'vmess.txt';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        show('เริ่มดาวน์โหลด vmess.txt ⤵️');
      });

      // keyboard shortcut: Ctrl/Cmd + Shift + C to copy
      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key.toLowerCase() === 'c') {
          e.preventDefault();
          btnCopy.click();
        }
      });
    })();
  </script>
</body>
</html>
